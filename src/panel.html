<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Component Auditor</title>
  <link rel="stylesheet" href="panel.css">
</head>
<body>
  <div class="header">
    <h1>Component Auditor</h1>
    <div class="header-actions">
      <button id="settings-btn" class="btn btn-secondary" title="Settings">⚙️</button>
      <button id="export-btn" class="export-btn" disabled>Export Dataset</button>
      <button id="select-component-btn" class="select-btn">Select Component</button>
    </div>
  </div>
  
  <div class="view-toggle">
    <button class="view-toggle-btn active" id="view-library-btn">Library</button>
    <button class="view-toggle-btn" id="view-capture-btn">Capture</button>
  </div>

  <div class="library-container active" id="library-container">
    <div class="library-header">
      <div class="library-title">Saved Components</div>
    </div>
    <div class="library-grid" id="library-grid">
      <!-- Library items will be dynamically inserted here -->
    </div>
    <div class="library-empty" id="library-empty" style="display: none;">
      <p>No components saved yet.</p>
      <p>Click "Select Component" in the header to start capturing components.</p>
    </div>
  </div>
  
  <div class="empty-state" id="empty-state" style="display: none;">
    <div class="empty-state-content">
      <p>Ready to capture.</p>
      <p style="font-size: 12px; color: #999;">Click "Select Component" in the header to identify UI elements.</p>
    </div>
    <p id="status-message" class="status-message"></p>
  </div>
  
  <div class="editor-container" id="editor-container">
    <div class="editor-left">
      <div class="editor-section flex-1">
        <div class="editor-section-title">Screenshot</div>
        <div class="screenshot-container">
          <img id="screenshot-img" src="" alt="Component Screenshot">
        </div>
      </div>
      <div class="editor-section flex-1">
        <div class="editor-section-title">HTML Code</div>
        <div class="code-viewer" id="code-viewer"></div>
      </div>
    </div>
    
    <div class="editor-right">
      <div class="form-container">
        <form id="component-form">
          <!-- Read-only Technical Data -->
          <div class="form-group">
            <div class="editor-section-title">Technical Data</div>
            <div class="readonly-group">
              <div class="readonly-item">
                <span class="readonly-label">Size</span>
                <span id="readonly-size" class="readonly-value">-</span>
              </div>
              <div class="readonly-item">
                <span class="readonly-label">Font</span>
                <span id="readonly-font" class="readonly-value">-</span>
              </div>
              <div class="readonly-item" style="grid-column: span 2;">
                <span class="readonly-label">URL</span>
                <span id="readonly-url" class="readonly-value">-</span>
              </div>
            </div>
          </div>
          
          <!-- Editable Semantic Fields -->
          <div class="form-group">
            <label for="component-type" class="form-label">Component Type</label>
            <input type="text" id="component-type" class="form-input" list="component-type-list" placeholder="e.g., Button, Card, Modal">
            <datalist id="component-type-list">
              <option value="Button">
              <option value="Card">
              <option value="Modal">
              <option value="Input">
              <option value="List">
              <option value="Navigation">
              <option value="Image">
              <option value="Text">
              <option value="Form">
              <option value="Header">
              <option value="Footer">
              <option value="Sidebar">
            </datalist>
            <div class="form-help">The specific type of component (e.g., Button, Card, Modal)</div>
          </div>
          
          <div class="form-group">
            <label for="atomic-level" class="form-label required">Atomic Level</label>
            <select id="atomic-level" class="form-select" required>
              <option value="">Select atomic level...</option>
              <option value="Atom">Atom</option>
              <option value="Molecule">Molecule</option>
              <option value="Organism">Organism</option>
              <option value="Template">Template</option>
              <option value="Page">Page</option>
            </select>
            <div class="form-error" id="atomic-level-error">Atomic Level is required</div>
          </div>
          
          <div class="form-group">
            <label for="design-pattern" class="form-label">Design Pattern</label>
            <select id="design-pattern" class="form-select">
              <option value="">Select design pattern...</option>
              <option value="Card">Card</option>
              <option value="Master-Detail">Master-Detail</option>
              <option value="List">List</option>
              <option value="Grid">Grid</option>
              <option value="Form">Form</option>
              <option value="Modal">Modal</option>
              <option value="Navigation">Navigation</option>
              <option value="Header">Header</option>
              <option value="Footer">Footer</option>
              <option value="Sidebar">Sidebar</option>
              <option value="Breadcrumb">Breadcrumb</option>
              <option value="Pagination">Pagination</option>
              <option value="Other">Other</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="interaction-pattern" class="form-label">Interaction Pattern</label>
            <select id="interaction-pattern" class="form-select">
              <option value="">Select interaction pattern...</option>
              <option value="Click">Click</option>
              <option value="Hover">Hover</option>
              <option value="Hover Reveal">Hover Reveal</option>
              <option value="Drag-and-Drop">Drag-and-Drop</option>
              <option value="Infinite Scroll">Infinite Scroll</option>
              <option value="Modal Workflow">Modal Workflow</option>
              <option value="Form Submission">Form Submission</option>
              <option value="Toggle">Toggle</option>
              <option value="Expand/Collapse">Expand/Collapse</option>
              <option value="Other">Other</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="notes" class="form-label">Notes</label>
            <textarea id="notes" class="form-textarea" placeholder="Add any additional notes about this component..."></textarea>
          </div>
        </form>
      </div>
      
      <div class="form-actions">
        <button type="button" id="cancel-btn" class="btn btn-secondary">Discard</button>
        <button type="button" id="save-btn" class="btn btn-primary">Save Component</button>
      </div>
    </div>
  </div>

  <div class="settings-container" id="settings-container" style="display: none;">
    <div class="settings-header">
      <h2>Settings</h2>
      <button id="settings-close-btn" class="btn btn-secondary">Close</button>
    </div>
    <div class="settings-content">
      <form id="settings-form">
        <div class="form-group">
          <label for="default-atomic-level" class="form-label">Default Atomic Level</label>
          <select id="default-atomic-level" class="form-select">
            <option value="auto">Auto-detect</option>
            <option value="Atom">Atom</option>
            <option value="Molecule">Molecule</option>
            <option value="Organism">Organism</option>
            <option value="Template">Template</option>
            <option value="Page">Page</option>
          </select>
          <div class="form-help">When capturing new components, automatically select this atomic level (or use auto-detection).</div>
        </div>
        
        <div class="form-group">
          <label for="custom-component-types" class="form-label">Custom Component Types</label>
          <textarea id="custom-component-types" class="form-textarea" placeholder="Enter one component type per line (e.g., Button, Card, Modal)"></textarea>
          <div class="form-help">Add custom component types to the Component Type dropdown. One per line.</div>
        </div>
        
        <div class="form-actions">
          <button type="button" id="settings-save-btn" class="btn btn-primary">Save Settings</button>
          <button type="button" id="settings-reset-btn" class="btn btn-secondary">Reset to Defaults</button>
        </div>
      </form>
    </div>
  </div>

  <div id="toast-container" class="toast-container"></div>
  
  <script src="db.js"></script>
  <script src="panel.js"></script>
</body>
</html>
